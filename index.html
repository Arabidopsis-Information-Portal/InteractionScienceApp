
<html lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">
<head profile="http://www.w3.org/1999/xhtml/vocab">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="https://www.araport.org/sites/default/files/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
  <title>Science Apps | Arabidopsis Information Portal</title>
  <link type="text/css" rel="stylesheet" href="https://www.araport.org/sites/default/files/css/css_ogjvJnfni1_P_WxvXAHlUOgCs860b3ip9DNMapcIGeM.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.araport.org/sites/default/files/css/css_tGTNtRAsNJmcVz4r7F6YCijbrQGDbBmziHSrRd1Stqc.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.araport.org/sites/default/files/css/css_fHFUfX9DqtycCZFmrlADmFVxDsMZe3SsQk_PWK0y3sg.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.araport.org/sites/default/files/css/css_xKh414cu1Y0ENChk1Qfiw7RsVRNHxTkURXXiXjCAfiI.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://www.araport.org/sites/default/files/css/css_zuQLDYLc7ZMdcVdiljQLFHrR8BGTVEM5EMozZYPAzjI.css" media="all" />
  <!-- HTML5 element support for IE6-8 -->
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="https://www.araport.org/sites/all/libraries/modernizr/modernizr-latest.js?n3es0r"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write("<script src='https://www.araport.org/sites/all/modules/contrib/jquery_update/replace/jquery/1.8/jquery.min.js'>\x3C/script>")</script>
<script src="https://www.araport.org/sites/default/files/js/js_IkgOrrVZK1UTp2HktvFi5vo1g7b25Muyr5GoySikuic.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<script>window.jQuery.ui || document.write("<script src='https://www.araport.org/sites/all/modules/contrib/jquery_update/replace/ui/ui/minified/jquery-ui.min.js'>\x3C/script>")</script>
<script src="https://www.araport.org/sites/default/files/js/js_EONTiUD4dRzNpXJzeY2jbHg-F1nLkHFTTSiMUyQFRo8.js"></script>
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-48916712-1");ga("set", "cookieDomain", ".araport.org");ga("send", "pageview");</script>
<script src="https://www.araport.org/sites/default/files/js/js_A53u_fVGh6TMpAlVKGoea9e7wWnUAkoGgsfygd6gDP4.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"araport_theme","theme_token":"19Mq81VsCQt-6NF2-sKBfe559RDH7nPfNFKmHADTp3k","js":{"sites\/all\/themes\/contrib\/bootstrap\/js\/bootstrap.js":1,"sites\/all\/libraries\/modernizr\/modernizr-latest.js":1,"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/1.8.2\/jquery.min.js":1,"0":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"https:\/\/ajax.googleapis.com\/ajax\/libs\/jqueryui\/1.10.2\/jquery-ui.min.js":1,"1":1,"sites\/all\/modules\/contrib\/homebox\/homebox.js":1,"sites\/all\/modules\/contrib\/homebox\/includes\/tipsy\/jquery.tipsy.js":1,"sites\/all\/modules\/contrib\/google_analytics\/googleanalytics.js":1,"2":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/affix.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/alert.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/button.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/carousel.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/collapse.js":1,"sites\/all\/themes\/custom\/araport-theme\/twbs-dropdown-doubletap\/js\/dropdown-doubletap.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/modal.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/tooltip.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/popover.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/scrollspy.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/tab.js":1,"sites\/all\/themes\/custom\/araport-theme\/bootstrap\/js\/transition.js":1},"css":{"modules\/system\/system.base.css":1,"misc\/ui\/jquery.ui.core.css":1,"misc\/ui\/jquery.ui.theme.css":1,"misc\/ui\/jquery.ui.button.css":1,"misc\/ui\/jquery.ui.resizable.css":1,"misc\/ui\/jquery.ui.dialog.css":1,"sites\/all\/modules\/contrib\/date\/date_api\/date.css":1,"sites\/all\/modules\/contrib\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/contrib\/views\/css\/views.css":1,"sites\/all\/modules\/contrib\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/contrib\/homebox\/homebox.css":1,"sites\/all\/modules\/contrib\/homebox\/includes\/tipsy\/tipsy.css":1,"sites\/all\/themes\/custom\/araport-theme\/css\/style.css":1,"sites\/all\/themes\/custom\/araport-theme\/css\/araport.css":1,"sites\/all\/themes\/custom\/araport-theme\/css\/homebox.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip","trackDomainMode":"1"},"bootstrap":{"anchorsFix":1,"anchorsSmoothScrolling":1,"popoverEnabled":1,"popoverOptions":{"animation":1,"html":0,"placement":"top","selector":"","trigger":"click","title":"","content":"","delay":0," ":"body"},"tooltipEnabled":0,"tooltipOptions":{"animation":1,"html":0,"placement":"top","selector":"","trigger":"hover focus","delay":0,"container":"body"}}});</script>
  <script type="text/javascript">jQuery.curCSS=jQuery.css;</script>
<!--qtip, for mouseover tooltips--!>

<script src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js"></script>
  <link href="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.css" rel="stylesheet" type="text/css" />
  <!-- end qtip script links --!>
  
</head>
<body class="html not-front not-logged-in no-sidebars page-apps" >
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
          <ul class="menu nav navbar-nav secondary"><li class="first leaf"><a href="/user/login" title="">Log in</a></li>
<li class="last leaf"><a href="/user/register" title="">Register</a></li>
</ul>      </div>
</nav>

<header role="banner">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
                <div id="logo" class="logo">
          <a href="/" title="Home">
            <img src="https://www.araport.org/sites/all/themes/custom/araport-theme/logo.png" alt="Home" />
          </a>
        </div>
        
        <div id="name-and-slogan">
                    <h1 class="site-name"><a href="/" title="Home">Arabidopsis Information Portal</a></h1>
          
                    <h2 class="site-slogan">Preview 2</h2>
                  </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
                <div class="region region-header">
    <section id="block-menu-menu-help-menu" class="block block-menu clearfix">

      
  <ul class="menu nav nav-pills help"><li class="first expanded dropdown"><a href="/about" title="" data-target="#" class="dropdown-toggle" data-toggle="dropdown">About <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="/about" title="">About the Project</a></li>
<li class="last leaf"><a href="/release-notes" title="">Release Notes</a></li>
</ul></li>
<li class="leaf"><a href="/help" title="">Help</a></li>
<li class="last leaf"><a href="mailto:araport@jcvi.org" title="">Contact</a></li>
</ul>
</section> <!-- /.block -->
  </div>
            </div>
    </div>
  </div>
</header>
<div id="navbar" class="navbar container navbar-default">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

          <div class="navbar-collapse collapse">
        <nav role="navigation">
                      <ul class="menu nav navbar-nav"><li class="first leaf"><a href="/">Home</a></li>
<li class="expanded dropdown"><a href="/thalemine/user-guide" data-target="#" class="dropdown-toggle" data-toggle="dropdown">ThaleMine <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="/thalemine/user-guide">ThaleMine User Guide</a></li>
<li class="leaf"><a href="/thalemine/faq">ThaleMine FAQ</a></li>
<li class="last leaf"><a href="http://apps.araport.org/thalemine" title="Arabidopsis-specific Intermine query interface. Access is currently restricted to AIP staff.">Access ThaleMine</a></li>
</ul></li>
<li class="expanded dropdown"><a href="/genome-browsers" title="Arabidopsis thaliana genome browsers" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Genome Browsers <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="https://www.araport.org/genome-browsers" title="">Overview</a></li>
<li class="leaf"><a href="https://apps.araport.org/jbrowse/?data=arabidopsis&amp;loc=Chr1%3A1504367..1514366&amp;tracks=TAIR9_assemblies%2CTAIR10_loci%2CTAIR10_genes%2CTAIR9_tDNAs%2CTAIR9_polymorphisms%2CTAIR9_markers" title="Password-protected link to TAIR10-sourced Arabidopsis thaliana Jbrowse ">Jbrowse</a></li>
<li class="last leaf"><a href="https://apps.araport.org/gb2/gbrowse/arabidopsis" title="Password-protected link to Arabidopsis TAIR10-sourced Gbrowse">Gbrowse</a></li>
</ul></li>
<li class="expanded dropdown"><a href="/community" title="" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Community <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="/community" title="">Overview</a></li>
<li class="leaf"><a href="/community-annotation" title="">Annotation</a></li>
<li class="leaf"><a href="/links" title="">Web Pages</a></li>
<li class="last leaf"><a href="/community/conferences-and-meetings">Conferences and Meetings</a></li>
</ul></li>
<li class="collapsed active-trail active"><a href="/apps" title="" class="active-trail active">Science Apps</a></li>
<li class="leaf"><a href="/downloads">Downloads</a></li>
<li class="last leaf"><a href="/devzone">Developer Zone</a></li>
</ul>                            </nav>
      </div>
      </div>
</div>

<div class="main-container container" role="main">
  <div class="row">
    
    <section class="col-sm-12">
                  <a id="main-content"></a>
                    <h1 class="page-header">Science Apps</h1>
                                                        <div id="homebox" class="homebox column-count-1 homebox-science_apps_dashboard homebox-auto-save clearfix">
  
  
  <div class="homebox-maximized"></div>
      <div class="homebox-column-wrapper homebox-column-wrapper-1 homebox-row-0" style="width: 100%;">
      <div class="homebox-column" id="homebox-column-1">
                                            <div id="homebox-block-block_8" class="homebox-portlet homebox-draggable clearfix block block-block">
  <div class="homebox-portlet-inner panel panel-default">
    <div class="portlet-header panel-heading">
      <h3 class="panel-title">About Apps        <div class="panel-actions pull-right">
                    <a class="glyphicon portlet-minus"></a>
          <a class="glyphicon portlet-maximize"></a>
                      <a class="glyphicon portlet-close"></a>
                  </div>
      </h3>
    </div>
    <div class="portlet-config">
                </div>
    <div class="portlet-content panel-body"><p>AIP users will be able to access their favorite Arabidopsis data as well as many new kinds of information via "science apps" developed and published to AIP via the Arabidopsis community and the AIP team. A more fully fleshed-out preview of this functionality is expected by the time of the 2014 International Conference on Arabidopsis Research.
</p><p><em>Here is an example of how this interface may look:</em></p>
<p><img src="https://www.araport.org/sites/default/files/styles/large/public/Mockup_AIP_Site.png" /></p>
</div>
  </div>
</div>
<!-- hello homebox-block -->                                                                  <div id="homebox-block-block_4" class="homebox-portlet homebox-draggable clearfix block block-block">
  <div class="homebox-portlet-inner panel panel-default">
    <div class="portlet-header panel-heading">
      <h3 class="panel-title">Interaction Viewer        <div class="panel-actions pull-right">
                    <a class="glyphicon portlet-minus"></a>
          <a class="glyphicon portlet-maximize"></a>
                      <a class="glyphicon portlet-close"></a>
                  </div>
      </h3>
    </div>
    <div class="portlet-config">
                </div>
    <div class="portlet-content panel-body">    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script type="text/javascript" src="https://araport.org/sites/all/libraries/cytoscape.js/cytoscape.min.js"></script>
<!-------------------------------------- HARD CODED SCRIPT LOCATION AHEAD FOR LOCALHOST USE ONLY! ---------->
    <script type="text/javascript" src="arbor.js"></script>
<!--------------------------------------- END HARD CODED SCRIPT LOCATION ------------------------------->
    
    <style type="text/css">
        body { 
          font: 14px helvetica neue, helvetica, arial, sans-serif;
        }
        
        #cy {
          height: 600px;
          position: relative;
        }
        #outerkey{
        padding:20px;
        display:inline-block;
        position:relative;
        width:100%;
        }
        #colorkey{
        float:left;
        position:relative;
        width:33%;
        }
    	#linekey{
    	float:left;
    	width:33%;
        position:relative;
        }
        #mouseover{
        float:left;
        width:100%;
        height:20%;
        position:relative;        }
        .warning, .error {
          border: 1px solid;
          margin: 10px 0px;
          padding: 15px 10px 15px 50px;
          background-repeat: no-repeat;
          background-position: 10px center;
        }
        
        .warning {
          color: #9F6000;
          background-color: #FEEFB3;
        }
        
        .error {
          color: #D8000C;
          background-color: #FFBABA;
        }
    </style>

    <h1>Enter a gene name to see its protein-protein interactions</h1>
    <p>Query (Any gene name or AGI ID, e.g. ASK1, AT1G10940, AT3G62980):</p>
    <form id="geneForm">
    	<input type="text" name="gene" id="gene" value="AT3G62980" />
    	<button type="button" class="btn btn-success"id="geneSubmit">Submit</button>
    	<button type="button" class="btn btn-danger"id="clearGraph">Clear</button>
	</form>
	<div id="box">
	<div id="cy" class="hidden"></div>
	</div>
	<div id="edgeoptions">
	<form action=''>
	<input type="radio" name="edgedisplay" value="tooltip"> Show information about interactions on mouseover in tooltips<br>
	<input type="radio" name="edgedisplay" checked value="div"> Show information about interactions on mouseover in the key (better for older browsers, including all versions of Internet Explorer, or those with compatibility issues).
	
	</form>
	
	</div>
	<div id="mouseover" class='hidden'><b>Information about this edge</b><br>Mouse over an edge on the above diagram to get information about the interaction it represents.</div>
	<div class="result"></div>
	<br>
	<div id="outerkey" class="hidden"> 
	<div id="colorkey"></div>
	<div id="linekey"><b>Line thickness by EBI's mi-score confidence value (more information<a href='http://www.ebi.ac.uk/intact/pages/faq/faq.xhtml#5'> here</a>):</b><br><img src='linekey.png'/></div>
	</div>
	<div><p>Data & web services provided by The Bio-Analytic Resource for Plant Biology (BAR): <a href="http://bar.utoronto.ca/webservices" target="_blank">http://bar.utoronto.ca/webservices</a>/</p></div> 
    
<script type="text/javascript">
jQuery(function($){

String.prototype.hashCode = function(){
    var hash = 0;
    if (this.length == 0) return hash;
    for (i = 0; i < this.length; i++) {
        char = this.charCodeAt(i);
        hash = ((hash<<5)-hash)+char;
        hash = hash & hash; // Convert to 32bit integer
    }
    return hash;
}

//    $(".portlet-maximize").click(function () {
//    });
////////////////////////Loads Cy from the JSON received; assigns view options based on this data, and constructs the Cytoscape object. 
    var render = function(elements) {
	
		//First the view options:
		
		
		//assigns the confidence scores to line thicknesses by modifying the JSON that will be passed to Cytoscape.
		for (var m = 0; m < elements.edges.length; m++){
		if (elements.edges[m].data.confidenceScore != '-'){
		if (elements.edges[m].data.confidenceScore < .30) elements.edges[m].data.lineThickness = 1;
		else if (elements.edges[m].data.confidenceScore >= .30 && elements.edges[m].data.confidenceScore < .40) elements.edges[m].data.lineThickness = 3;
		else if (elements.edges[m].data.confidenceScore >= .40 && elements.edges[m].data.confidenceScore < .50) elements.edges[m].data.lineThickness = 6;
		else if (elements.edges[m].data.confidenceScore >= .50 && elements.edges[m].data.confidenceScore < .60) elements.edges[m].data.lineThickness = 9;
		else if (elements.edges[m].data.confidenceScore >= .60 && elements.edges[m].data.confidenceScore < .70) elements.edges[m].data.lineThickness = 11;
		else if (elements.edges[m].data.confidenceScore >= .70) elements.edges[m].data.lineThickness = 15;
		}
		}
		
        //loops through the json elements received through the AJAX call and assigns colors to the experiment types. 
    	var colors = ['#2BAB2B','#3366CC','#B8008A', '#7634D9', '#FF8A14','#FF0000', '#74F774', '#73A2FF', '#F28DD9', '#AF8DE0', '#FA9696', '#175E17', '#0A3180', '#69004E', '#400F8A', '#5C330A', '#730000'];
       	var experiments = [];
    	var colorsused = [];
    	var k = 0;
    	for (var i = 0; i < elements.edges.length;i++){
    	var found = 0; 
    	//find out whether this particular experiment has been assigned a color yet
    	for (var j = 0; j < experiments.length;j++){
    	if (experiments[j] == elements.edges[i].data.humanReadable){found = 1;
    	elements.edges[i].data.lineColor = colorsused[j];
    	}
    	}
    	
    	//if it's new give it a color, and add the new color and the corresponding experiment name to two arrays. They will be used to construct the graph key later. 
    	//k is the counter to which colors have been used already. if the number of experiments is greater than the number of colors, the counter resets and it starts reusing colors.
    	if (experiments.indexOf(elements.edges[i].data.humanReadable) ==-1){
    	experiments.push(elements.edges[i].data.humanReadable);
    	colorsused.push(colors[k]);
    	elements.edges[i].data.lineColor = colors[k];
    	k++
    	if (k >= colors.length) k=0;
    	}
    	}
    	
    	///Now we construct the objects themselves: Cytoscape, tooltips, the key. 
    	
    	//constructs a key on the fly based on the matching of colors to experiments determined above, and the hard-coded line thickness values. 
		$('#colorkey').append('<b>Interaction determination by line color: <br></b>');    	
    	for (var i = 0; i < experiments.length; i++){
    	$('#colorkey').append('<span style="color:'+ colorsused[i] + '">' + experiments[i] + "</span><br>");
    	}  	
    	
    	//and unhide the key
    	$('#outerkey').removeClass('hidden'); 
    	
    	//now construct the Cytoscape object based on the options supplied by the JSON object. 
		
 		$('#cy').removeClass('hidden');   
		$('#cy').cytoscape({
		layout: { name: "arbor",
			liveUpdate: true,
			maxSimulationTime: 4000,
			padding: [50,50,50,50],
			simulationBounds: undefined,
			ungrabifyWhileSimulating: true,
			repulsion: undefined,
			stiffness: undefined,
			friction: undefined,
			gravity: true,
			fps: undefined,
			precision: undefined,
			nodeMass: undefined, 
			edgeLength: undefined,
			stepSize: 1,
			stableEnergy: function( energy ){
				var e = energy; 
				return (e.max <= 0.5) || (e.mean <= 0.3);
			}
    	  },
    	  minZoom:0.25,
    	  maxZoom:2.0,
		  style: cytoscape.stylesheet()
			.selector('node')
			  .css({
				'content': 'data(name)',
				'text-valign': 'center',
				'color': 'white',
				'text-outline-width': 2,
				'text-outline-color': '#888'
			  })
			.selector('edge')
			  .css({
			/*	'target-arrow-shape': 'triangle',*/
				'line-color':'data(lineColor)',
			/*	'target-arrow-color':'data(lineColor)',*/
				'width': 'data(lineThickness)'
				  })
			.selector(':selected')
			  .css({
				'background-color': 'black',
				'line-color': 'black',
				'target-arrow-color': 'black',
				'source-arrow-color': 'black'
			  })
			.selector('.faded')
			  .css({
				'opacity': 0.25,
				'text-opacity': 0
			  }),
  
		  elements: elements,
  //bind functions to various events - notably, the mouseover tooltips
		  ready: function(){
			window.cy = this;

			// giddy up...

			cy.elements().unselectify();

			cy.on('tap', 'node', function(e){
			  var node = e.cyTarget; 
			  var neighborhood = node.neighborhood().add(node);

			  cy.elements().addClass('faded');
			  neighborhood.removeClass('faded');
			});

			cy.on('tap', function(e){
			  if( e.cyTarget === cy ){
				cy.elements().removeClass('faded');
			  }
			});
		
		    //construct the mouseovers 
    cy.on('mouseover','edge', function(event){
       var target = event.cyTarget;
   
   
  if ($("input[name='edgedisplay']:checked").val() == 'tooltip')   { makeTooltips(target);
  }
  else if ($("input[name='edgedisplay']:checked").val() == 'div') {makeDiv(target);
	$("#cy").qtip('disable');}
  });
  
   cy.on('mouseout','edge', function(event){
   
   
   if ($("input[name='edgedisplay']:checked").val() == 'tooltip')   {
   $("#cy").qtip('hide');
   }
    else if ($("input[name='edgedisplay']:checked").val() == 'div') {
	$("#cy").qtip('disable');}
  
    });
  
		
		
		  },


		}); 
    } //end render()
    
    function makeDiv(target){
  
    $("#mouseover").removeClass('hidden');
     var sourceName = target.data("source"); 
     var targetName = target.data("target");
     var experiment = target.data('humanReadable');
     var CV = target.data('confidenceScore');
     var publication = target.data('publication');
     var firstAuthor = target.data('firstAuthor');
     var sourceDatabase = target.data('sourceDatabase');   
     $("#mouseover").text('');                    
     $("#mouseover").append("<b>Information about this edge</b> <br>Experiment: " + experiment + "<br>Confidence score: " + CV + "<br>First author: " + firstAuthor + "<br>Source Database: " + sourceDatabase + "<br>Publication: " + publication ); 

    
    }
    
    
function makeTooltips(target){
     var sourceName = target.data("source"); 
     var targetName = target.data("target");
     var experiment = target.data('humanReadable');
     var CV = target.data('confidenceScore');
     var publication = target.data('publication');
     var firstAuthor = target.data('firstAuthor');
     var sourceDatabase = target.data('sourceDatabase');
     
                          
    var tooltips = $("#cy").qtip({
      content: "Experiment: " + experiment + "<br>Confidence score: " + CV + "<br>First author: " + firstAuthor + "<br>Source Database: " + sourceDatabase + "<br>Publication: " + publication , 
      show: {
        ready: true,
        delay:2000
      },
      hide:{event:'click'},
      position: {
        my: 'top center',
        at: 'bottom center',
        target:'mouse',
        adjust: {
        mouse:false,
          cyViewport: true
        }
      },
      style: {
        classes: 'qtip-bootstrap',
        tip: {
          width: 16,
          height: 8
        }
      }
    });
    
    var api = tooltips.qtip('api');


}


	$("input[name='edgedisplay']").change(function(){
	console.log('481');
	if ($("input[name='edgedisplay']:checked").val() == 'tooltip'){$("#mouseover").addClass('hidden');
	}
	else if ($("input[name='edgedisplay']:checked").val() == 'div'){$("#mouseover").removeClass('hidden');}
	
	}); 
	   
    $("#clearGraph").click(function() {
        $("#cy").addClass('hidden');
        $("#gene").val('');
        $("#colorkey").text('');
        $("#mouseover").text('');
        $("#mouseover").addClass('hidden');
	$("#key").text('');
    });

  var ajaxFail = function(url) {
			$(".result" ).addClass("alert alert-danger");
			$( ".result" ).html( "We could not load the gene data from " + url );
		};

///Retrieves data, then parses it into a JSON file, containing all the information needed to construct the Cytoscape object. 
	$("#geneSubmit").click(function(e){	
	$("#colorkey").text('');
	$("#mouseover").text('');
	$("#mouseover").addClass('hidden');
	    
/////////////////////////////////hard-coded url for data file here, should be changed to point to the webservice supplying our data!
	//	var url = "https://www.araport.org/apiproxy/BARClient/"+$("#gene").val(); 
var url = "psi.txt";
//////////////////////////////////////end hard coded url for data file



		$(".result" ).removeClass("alert alert-danger");
		var gene = $("#gene").val();
		//did the user enter the name of a gene?
		if(gene.length > 0) {
			//perform ajax GET
			$.get( url,function(data){ //success function 
                          if(data.length <= 0) {  
                          ajaxFail(url);}
			  else { //if data was retrieved
					 parseItToJSON(data);
                               }
                         },"text");
		} else {
			alert("You must enter a gene first." ) ;
			return;
	        	}		
	}); /// end gene submit function
	
	
var parseItToJSON = function(data){
                var nodes = [];
		var proteins = [];
		var edges = [];
		var elements = {};
		var gene = $("#gene").val();

	    data = data.split("\n");
				  for(var i=0; i< data.length; i++) {
					var line = data[i].split("\t");				  	
				  	if(line[0].length > 0) {
				  	  var p1 = line[0]
				  	  var p2 = line[1]
				  	  var p3 = line[6];
				  	  var p5 = line[14];
				  	  var p6 = line[7];
				  	  var p7 = line[8];
				  	  var p8 = line[12];
				  	  if (p3 != '-'){
				  	  p3 = line[6].replace('psi-mi:"MI:', '');
				  	  p4 = p3.slice(6, p3.indexOf(')'));
					  p3 = p3.slice(0,4);
				  		}
				  	  if (p5 != '-'){
				  	  p5 = line[14].substring(line[14].indexOf(':') + 1);
				  	  }
				  	  p6 = p6.replace('|', '; ');
				  	  var line2 = p7.split('|');
				      p7 = '';	
				  	  for (var j = 0; j < line2.length; j++){
				  	  var tmp = '';
				  	  tmp = line2[j].substring(line2[j].indexOf(':') + 1);
				  	  p7 = p7 + tmp;
				  	  }
				  	  p7 = p7.slice(0, p7.indexOf(';'));
				  	  
				  	  var line3 = p8.split('|');
				      p8 = '';	
				  	  for (var j = 0; j < line3.length; j++){
				  	  var tmp = '';
				  	  tmp = line3[j].substring(line3[j].indexOf('(')+1);
				  	  tmp = tmp.substring(0, tmp.length - 1);
				  	  p8 = p8 + tmp + '; ' ;
				  	  }
				  	  p8 = p8.slice(0, p8.indexOf(';'));
	
				  	  //add to "nodes" proteins array if not already in there
				  	  if(proteins.indexOf(p1) == -1) {
				  	  	proteins.push(p1);
				  	    nodes.push({data: {id: p1, name: p1}});
				  	  } else { console.log('not added');}
				  	  if(proteins.indexOf(p2) == -1) {
				  	  	proteins.push(p2);
				  	    nodes.push({data: {id: p2, name: p2}});
				  	  } else { console.log('not added');}
						var idis = p1 + p2;

						var duplicate = false;
						for (var m = 0; m < edges.length; m++){
						if ((((p1 == edges[m].data.source) && (p2 == edges[m].data.target)) || ((p2 == edges[m].data.source) && (p1 == edges[m].data.target))) && (p3 == edges[m].data.lineColor) && (p5 == edges[m].data.confidenceScore))
						{duplicate = true;}
						}
					if (!duplicate){		  	  edges.push({data:{ source: p1 , target: p2, id: idis, lineColor: p3, humanReadable:p4, confidenceScore:p5, lineThickness: '-', firstAuthor:p6, publication:p7, sourceDatabase: p8}});     }
				  	}
				  }

				  elements = {nodes: nodes, edges: edges};
				  console.log(JSON.stringify(elements)); ///prints new JSON to the console.  

				  render(elements);

			  }
			

}); //end Jquery functions
</script></div>
  </div>
</div>
<!-- hello homebox-block -->                                                                  <div id="homebox-block-user_new" class="homebox-portlet homebox-draggable clearfix block block-user">
  <div class="homebox-portlet-inner panel panel-default">
    <div class="portlet-header panel-heading">
      <h3 class="panel-title">Who's New at Araport?        <div class="panel-actions pull-right">
                    <a class="glyphicon portlet-minus"></a>
          <a class="glyphicon portlet-maximize"></a>
                      <a class="glyphicon portlet-close"></a>
                  </div>
      </h3>
    </div>
    <div class="portlet-config">
                </div>
    <div class="portlet-content panel-body"><ul><li class="first"><span class="username" xml:lang="" about="/user/107" typeof="sioc:UserAccount" property="foaf:name" datatype="">harleyk</span></li>
<li><span class="username" xml:lang="" about="/user/106" typeof="sioc:UserAccount" property="foaf:name" datatype="">wmoreiratest</span></li>
<li><span class="username" xml:lang="" about="/user/105" typeof="sioc:UserAccount" property="foaf:name" datatype="">wmoreira</span></li>
<li><span class="username" xml:lang="" about="/user/104" typeof="sioc:UserAccount" property="foaf:name" datatype="">msarmien</span></li>
<li class="last"><span class="username" xml:lang="" about="/user/103" typeof="sioc:UserAccount" property="foaf:name" datatype="">kentaro</span></li>
</ul></div>
  </div>
</div>
<!-- hello homebox-block -->                                    </div>
    </div>
  </div>
<!-- hello homebox -->
<script type="text/javascript">
!function($){
  $('.panel-actions a').tooltip({
    title: function() {
      switch ($(this).attr('class').replace('glyphicon portlet-', '')) {
      case 'close':
        return Drupal.t('Close');
      case 'maximize':
        return Drupal.t('Maximize');
      case 'minimize':
        return Drupal.t('Minimize');
      case 'minus':
        return Drupal.t('Hide');
      case 'plus':
        return Drupal.t('Show');
      case 'settings':
        return Drupal.t('Settings');
      }
    }
  });
  $('#homebox-add a').addClass('btn btn-info');
  $('#homebox-add a.used').removeClass('btn-info').addClass('btn-default');
  $('#homebox-add a.restore').removeClass('btn-info').addClass('btn-warning');
}(jQuery);
</script>    </section>

    
  </div>

      <div class="row">
      <section class="col-md-12 content-bottom-wrapper">
        <div class="well well-sm">
            <div class="region region-content-bottom">
    <section id="block-views-service-notices-block-1" class="block block-views clearfix">

        <h2 class="block-title">Service Notices</h2>
    
  <div class="view view-service-notices view-id-service_notices view-display-id-block_1 view-dom-id-1fc8f3de80bdfb7e33b06e1d0d864ef4">
        
  
  
      <div class="view-content">
      <table class="views-table cols-0 table" >
       <tbody>
          <tr class="odd views-row-first">
                  <td class="views-field views-field-title" >
            <a href="/node/101">[Service Disruption] ThaleMine update in progress</a>          </td>
                  <td class="views-field views-field-field-date" >
            <span class="date-display-single">2014-05-29 <span class="date-display-start" property="dc:date" datatype="xsd:dateTime" content="2014-05-29T10:00:00-05:00">10:00</span> to <span class="date-display-end" property="dc:date" datatype="xsd:dateTime" content="2014-05-29T13:00:00-05:00">13:00</span></span>          </td>
                  <td class="views-field views-field-body" >
            The current instance of ThaleMine has been shutdown to facilitate an update to the data and software.

We are sorry for the inconvenience caused. Please check back soon for the new and improved release.

Thank you!          </td>
              </tr>
          <tr class="even">
                  <td class="views-field views-field-title" >
            <a href="/node/94">ThaleMine and genome browsers are now publicly available</a>          </td>
                  <td class="views-field views-field-field-date" >
            <span class="date-display-single" property="dc:date" datatype="xsd:dateTime" content="2014-04-02T00:00:00-05:00">2014-04-02 (All day)</span>          </td>
                  <td class="views-field views-field-body" >
            Araport PR2 went live this morning before password protection was turned off on the ThaleMine and the genome browser services. This has been resolved and these now are available for public use. Please note that the main Araport site and ThaleMine use separate user accounts for login. This will be resolved in a future release of the portal.          </td>
              </tr>
          <tr class="odd views-row-last">
                  <td class="views-field views-field-title" >
            <a href="/node/91">Araport Preview 2 released today</a>          </td>
                  <td class="views-field views-field-field-date" >
            <span class="date-display-single" property="dc:date" datatype="xsd:dateTime" content="2014-04-01T00:00:00-05:00">2014-04-01 (All day)</span>          </td>
                  <td class="views-field views-field-body" >
            We are pleased to announce public availability of Arabidopsis Information Portal Preview Release 2. Release notes can be found under the About menu.          </td>
              </tr>
      </tbody>
</table>
    </div>
  
  
  
  
  
  
</div>
</section> <!-- /.block -->
  </div>
        </div>
      </section>
    </div>
  </div>
<footer class="footer container">
    <div class="region region-footer">
    <section id="block-block-1" class="block block-block clearfix">

      
  <style type="text/css">
<!--/*--><![CDATA[/* ><!--*/

.footer-partners > a {
  display: inline-block;
  margin: .5em;
}

/*--><!]]>*/
</style><p class="text-center footer-partners">
  <a href="http://www.jcvi.org/" target="_blank"><img src="https://www.araport.org/sites/default/files/jcvi.jpg" /></a><a href="http://www.tacc.utexas.edu" target="_blank"><img src="https://www.araport.org/sites/default/files/tacc.jpg" /></a><a href="http://www.cam.ac.uk/" target="_blank"><img src="https://www.araport.org/sites/default/files/cambridge.jpg" /></a><a href="http://intermine.org" target="_blank"><img src="https://www.araport.org/sites/default/files/intermine.jpg" /></a><a href="http://iplantcollaborative.org" target="_blank"><img src="https://www.araport.org/sites/default/files/iplant.jpg" /></a>
</p>
<p class="text-center">The Arabidopsis Information Portal is funded by a grant from the National Science Foundation (<a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=1262414" target="_blank">#DBI-1262414</a>)<br /> and co-funded by a grant from the Biotechnology and Biological Sciences Research Council (<a href="http://www.bbsrc.ac.uk/pa/grants/AwardDetails.aspx?FundingReference=BB/L027151/1" target="_blank">BB/L027151/1</a>)</p>

<script>
<!--//--><![CDATA[// ><!--

jQuery.curCSS = jQuery.css;

//--><!]]>
</script>
</section> <!-- /.block -->
  </div>
</footer>
  <script src="https://www.araport.org/sites/default/files/js/js_B2uv6dkjoYobfQVyuXdchgrpnnx4oM0TkP_bDVf8Qrg.js"></script>
</body>
</html>
